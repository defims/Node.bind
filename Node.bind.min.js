!function(a,b,c){function d(){}function e(a){this.origin=a}function f(a){var b=this,c=a.split("|");b.origin=a,b.path=c[0],b.filter=new d(c[1]),b.parsed=b.parse(a||"")}function g(a){var b=this;b.origin=a,b.parsed=b.parse(a||"")}function h(a){var b=this;b.origin=a,b.parsed=b.parse(a)}function i(a,b,c,d){var e=this;e.node=a,e.scope=c,e.directive=new h(b),e.template=new g(d),e.bindings=[],e.refreshListener()}function j(a,b){for(var c,d=z.length,e=this;d--;)if(c=z[d],c.object==a&&c.property==b)return c;e.object=a,e.property=b,e.bindings=[],e.refreshListener(),z.push(e)}function k(a,b){var c,d;if("object"==typeof a&&"object"==typeof b){for(c in a){if("undefined"==typeof b[c])return!1;if(b[c]&&!a[c])return!1;if(d=typeof a[c],"object"===d&&!k(a[c],b[c]))return!1;if("function"===d&&("undefined"==typeof b[c]||a[c].toString()!==b[c].toString()))return!1;if(a[c]!==b[c])return!1}for(c in b)if("undefined"==typeof a[c])return!1;return!0}return a===b}function l(a,b,c){var d,e,f={};for(d in b)e=b[d],d in a&&(a[d]===e||d in f&&f[d]===e)||(a[d]=c?c(e):e);return a}function m(a){if(!a||"object"!=typeof a||"[object Function]"===Object.prototype.toString.call(a))return a;if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var b,c,d;if(a instanceof Array)for(b=[],c=0,d=a.length;d>c;++c)c in a&&b.push(m(a[c]));else b=a.constructor?new a.constructor:{};return l(b,a,m)}function n(a,b,c){B.push({object:a,property:b,callback:c,clone:m(a[b])})}function o(){for(var a,b,c=B.length;c--;)a=B[c],b=a.object[a.property],k(a.clone,b)||(a.clone=m(b),a.callback())}function p(a,b){return function(){var c=this,d=arguments;try{a.apply(c,d)}finally{b.apply(c,d)}}}function q(a,b){var c=a[b];a[b]=function(){for(var a,b,d,e=arguments,f=e.length;f--;)a=e[f],"function"==typeof a&&(b=e[f],d=p(a,o),e[f]=d,d.nbOriginCallback=d.nbOriginCallback||[],d.nbOriginCallback.push(b),b.nbAfterCallback=b.nbAfterCallback||[],b.nbAfterCallback.push(d));c.apply(this,e)}}function r(a,b,c,d){var e,f,g,h;for(e=a.nodeName?[a]:a,d||("string"==typeof c?f=c:g=c),h=e.length;h--;)r.core(e[h],b,g,f)}var s={};s.path2Array=function(a){return a.replace(/^\[/g,"").replace(/\[/g,".").replace(/\]/g,"").split(".")};var t=d.prototype;t.render=function(){},t.compile=function(){};var u=e.prototype;u.getValue=function(a,b){var c=this.origin;if("$index"==c){var d=!1,e=a;for(("scope"==b||"repeat"==b)&&(e=a.parentElement);e;){if(e.nbPrototype||e.nbInstances){d=!0;break}e=e.parentElement}if(c=0,d&&e.nbPrototype){for(;e&&(e.nbPrototype&&c--,!e.nbInstances);)e=e.previousSibling;c=-c}}return c};var v=f.prototype;v.getValue=function(a,b,c){var d=this,e=d.getObjectProperty(a,b,c),f=e.object,g=e.property;return""!==g?f[g]||"":void 0},v.setValue=function(){},v.parse=function(a){for(var b,c=s.path2Array(a),d=c.length;d--;)b=c[d],"$"==b.charAt(0)&&(c[d]=new e(b));return c},v.getObjectProperty=function(a,b,d){var e,f,g=this,h=g.parsed,i=h.length-1,j=h[0],k=b[0],l=b.length,m=!1,n={};for(j.getValue&&(j=j.getValue(a)),f=0;l>f;f++)if(k=b[f],k.hasOwnProperty(j)){m=!0;break}if(m)for(n=k,e=h[i],e.getValue&&(e=e.getValue(a,d)),f=0;i>f;f++){if(j=h[f],j.getValue&&(j=j.getValue(a,d)),!n.hasOwnProperty(j)||n[j]===c){n={},e=c;break}n=n[j]}return{object:n,property:e}};var w=g.prototype;w.set=function(){},w.parse=function(a){for(var b,c=a.length,d=[],e="",g=!1;c--;)b=a[c],g&&"{"==b&&"{"==a[c-1]?(c--,e&&d.unshift(new f(e)),e="",g=!1):g||"}"!=b||"}"!=a[c-1]?e=b+e:(c--,e&&d.unshift(e),e="",g=!0);return e&&d.unshift(e),d},w.getValue=function(a,b,c){for(var d,e=this,f=e.parsed,g=f.length,h=[];g--;)d=f[g],d.getValue&&(d=d.getValue(a,b,c)),h.unshift(d);return 0!==h.length?h:[]},w.setValue=function(){},w.getScopes=function(a,c){var d,e=b,f=[];for(("repeat"==c||"scope"==c)&&(a=a.parentElement);a;)d=a.nbScope,d&&f.push(d),a=a.parentElement;return e.nbScope=e.nbScope||e,f.push(e.nbScope),f},w.getObjectProperty=function(a,b,c){for(var d,e=this,f=e.parsed,g=f.length,h=[];g--;)d=f[g],d&&d.path&&h.push(d.getObjectProperty(a,b,c));return h.length?h:[{object:b[0],property:""}]},w.unbind=function(){};var x=h.prototype;x.parse=function(a){var b=s.path2Array(a);return{type:b.shift(),detail:b}};var y=i.prototype;y.getValue=function(){var a=this;return a.template.getValue(a.node,a.getScopes(),a.directive.parsed.type)},y.getScopes=function(){var a=this,b=a.template.getScopes(a.node,a.directive.parsed.type);return a.scope&&b.unshift(a.scope),b},y.render=function(){function a(a,b){var c,d=b.length;for(c=0;d>c;c++)a=a.childNodes[b[c]];return a}var b=this,d=b.node,e=d.nodeType,f=b.directive.parsed,g=f.type.toLowerCase(),h=f.detail,j=b.getValue(),k=1,l=3;if("scope"==g)e==k&&(j=j[0],d.nbScope!=j&&r.setTreeScope(d,j));else if("repeat"==g){if(e==k)if(j=j[0],d.nbPrototype)d.nbScope!=j&&r.setTreeScope(d,j);else{var m,n,o,p,q=j.length,s=d.nbInstances=d.nbInstances||[];for(m=0;q>m;m++)if(0==m)p=d,p.nbScope!=j&&r.setTreeScope(p,j);else if(s[m-1])p=s[m-1],p.nbScope!=j&&r.setTreeScope(p,j);else{o=d.cloneNode(!0),p.parentNode.insertBefore(o,p.nextSibling),o.nbPrototype=d,o.nbScope=d.nbScope,s.push(o);var q,t;r.walkTree(d,function(b,c){currNode=this;var d,e,f,g,h,g=currNode.nbViews;if(currNode.nbPrototype)return e=a(o,c),e.parentNode.removeChild(e),!1;if(g=currNode.nbViews)for(d=g.length,h=a(o,c),views=h.nbViews=[];d--;)f=g[d],views.push(new i(h,f.directive.origin,f.nbScope,f.template.origin))}),p=o,r.setTreeScope(p,j)}if(q-=2,q>0)for(;++q<s.length;)p=s[q],p.parentNode.removeChild(p),s[q]=c}}else if("textcontent"==g)j=j.join(""),e==k?d.textContent!=j&&(d.textContent=j):e==l&&d.nodeValue!=j&&(d.nodeValue=j);else if("attribute"==g){if(e==k){var u=h[0];if("id"==u&&d.id!=j)d.id=j;else if("class"==u){for(var v,w,x,y,t,q=j.length,z=[];q--;)if(v=j[q],w=Object.prototype.toString.call(v),"[object Array]"===w)z.unshift(v.join(" "));else if("[object Object]"===w){var A,B="";for(A in v)B+=" "+v[A];z.unshift(B)}else z.unshift(v);if(z=z.join("").replace(/ +/g," ").replace(/^\s+|\s+$/g,""),x=d.className,t=d.nbLastClass)for(y=t.length;y--;)x=x.replace(t[y],"");(t===c||t.join(" ")!=z)&&(d.className=(x+" "+z).replace(/ +/g," ").replace(/^\s+|\s+$/g,""),d.nbLastClass=z.split(" "))}else if("style"==u){if(h[1]){var n,m,C,D,E=j.length,F=h.length-1,C=d.style,D=h[F];for(m=1;F>m;m++)C=C[h[m]];for(;E--;)C[D]=j[E]}else for(var n,q=j.length;q--;)if(n=j[q],"string"==typeof n)for(var G,H=n.split(";"),I=H.length;I--;)G=H[I].split(":"),d.style[G[0].replace(" ","")]=G[1];else if("[object Object]"==Object.prototype.toString.call(n)){var A;for(A in n)d.style[A]=n[A]}}else if("value"==u)d.value=j;else{var F=h.length-1,E=j.length;if(F>0){var m,n,u=d.attributes,D=h[F];for(m=0;F>m;m++)n=h[m],u[n]||(u[n]={}),u=u[n];for(;E--;)u[D]=j[E]}else for(;E--;){var j=j[E];j&&d.setAttribute(h[0],j)}}}}else if("dataset"==g){var m,F=h.length,E=j.length,J=h[0];for(m=1;F>m;m++)J+="-"+h[m];for(;E--;)d.setAttribute("data-"+J,j[E])}else if("event"==g){for(var n,E=j.length,K=d.nbEvents=d.nbEvents||[],L=h[0];K.length;)d.removeEventListener(L,K.pop());for(;E--;)n=j[E],"function"==typeof n&&(K.push(n),d.addEventListener(L,n))}else if("nodevalue"==g)j=j.join(""),e==k?d.textContent!=j&&(d.nodeValue=j):e==l&&d.nodeValue!=j&&(d.nodeValue=j);else{var m,n,F=h.length,E=j.length,J=g;for(m=0;F>m;m++)n=h[m],J+=n.substring(0,1).toUpperCase()+n.substring(1);for(;E--;)d[J]=j[E]}},y.getBinding=function(a){for(var b,d=this,e=d.bindings,f=e.length,g=!1;f--;)if(b=e[f],b.target==a){g=!0;break}return g||(b={target:a,callback:c},e.push(b)),b},y.bind=function(a,b){this.getBinding(a).callback=b},y.unbind=function(){},y.getObjectProperty=function(){var a=this;return a.template.getObjectProperty(a.node,a.getScopes(),a.directive.parsed.type)},y.change=function(){},y.refreshListener=function(){};var z=[],A=j.prototype;A.get=function(){},A.set=function(){},A.update=function(){},A.change=function(){for(var a,b=this.bindings,c=b.length;c--;)a=b[c],a.callback.call(a.target)};var B=[];q(b,"setTimeout"),q(b,"setInterval");var C,D=Node.prototype;b.EventTarget!=c&&(D=b.EventTarget),q(D,"addEventListener"),C=D.removeEventListener,D.removeEventListener=p(C,function(a,b){for(var c=b.nbAfterCallback,d=c.length;d--;)C.call(this,a,c[d]);o()}),A.refreshListener=function(){function a(a,c){"[object Array]"===Object.prototype.toString.call(a[c])&&n(a[c],"length",function(){b.change.call(b)})}var b=this,d=b.object,e=b.property;if(""!==e&&"object"==typeof d&&null!=e&&e!=c){try{var f=d[e];Object.defineProperty(d,e,{get:function(){return f},set:function(c){f=c,a(d,e),b.change()},configurable:!0})}catch(g){n(d,e,function(){a(d,e),b.change.call(b)})}a(d,e)}},A.getBinding=function(a){for(var b,d=this,e=d.bindings,f=e.length,g=!1;f--;)if(b=e[f],b.target==a){g=!0;break}return g||(b={target:a,callback:c},e.push(b)),b},A.bind=function(a,b){var c=this,d=c.getBinding(a);d.callback=b},A.unbind=function(){},r.core=function(a,b,c,d){var e,f,g,h,k,l,m;for(f=new i(a,b,c,d),e=a.nbViews=a.nbViews||[],e.push(f),g=a.nbModels=a.nbModels||[],k=f.getObjectProperty(),m=k.length;m--;)l=k[m],h=new j(l.object,l.property),g.push(h),f.bind(h,h.update),h.bind(f,f.render);f.render()},r.walkTree=function(a,b){var c,d,e=[],f=0;do c||(c=b.call(a,f,e)===!1),!c&&(d=a.firstChild)?(f++,e.push(0)):(d=a.nextSibling)?(c=!1,e[e.length-1]++):(d=a.parentNode,f--,c=!0,e.pop()),a=d;while(f>0)},r.setTreeScope=function(a,b){if(b){a.nbScope=b;var c,d,e,f,g,h,i,k,l;r.walkTree(a,function(){if(c=this,d=c.nbViews)for(e=d.length,f=c.nbModels=[];e--;){for(g=d[e],h=g.getObjectProperty(),i=h.length;i--;)k=h[i],l=new j(k.object,k.property),f.push(l),g.bind(l,l.update),l.bind(g,g.render);g.render()}})}},b.NodeBind=r}(document,window);